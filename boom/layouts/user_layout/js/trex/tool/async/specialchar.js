(function(){var f=document,e=window,c=f.documentElement,a=false,b=true,d=null,g;TrexMessage.addMsg({"@specialchar.cancel.image":"#iconpath/btn_l_cancel.gif?v=2","@specialchar.confirm.image":"#iconpath/btn_l_confirm.gif?v=2","@specialchar.title":"\uc120\ud0dd\ud55c \uae30\ud638"});Trex.Class.overwrite(Trex.Tool.SpecialChar,{oninitialized:function(){var i=this.canvas;var h=function(j){if(!j){return}i.execute(function(k){k.pasteContent(j,a)})};this.resetWeave();this.weave.bind(this)(new Trex.Button(this.buttonCfg),new Trex.Menu.SpecialChar(this.menuCfg),h);this.forceActivate()}});Trex.MarkupTemplate.add("menu.specialchar.input",['<dl class="tx-menu-matrix-input">',"	<dt><span>@specialchar.title</span></dt>",'	<dd><input type="text" value=""/></dd>','	<dd><img class="tx-menu-btn-confirm" src="@specialchar.confirm.image" align="absmiddle"/></dd>','	<dd><img class="tx-menu-btn-cancel" src="@specialchar.cancel.image" align="absmiddle"/></dd>',"</dl>"].join(""));Trex.Menu.SpecialChar=Trex.Class.create({$extend:Trex.Menu.Matrix,ongenerated:function(){var j=this.elMenu;
var h=Trex.MarkupTemplate.get("menu.specialchar.input").evaluateAsDom({});$tom.append($tom.collect(j,"div.tx-menu-inner"),h);var i=this.elInput=$tom.collect(h,"input");var k=$tom.collectAll(h,"img");if(k.length==2){$tx.observe(k[0],"click",function(){this._command(this.elInput.value);this.hide()}.bind(this));$tx.observe(k[1],"click",function(){this.onCancel()}.bind(this))}$tx.observe(i,"keydown",function(l){if(l.keyCode==13){$tx.stop(l);this._command(this.elInput.value);this.hide()}}.bind(this))},onregenerated:function(){this.elInput.value="";this.elInput.focus()},onSelect:function(i){var k=this.elInput;var h=$tx.findElement(i,"span");if(h.tagName&&h.tagName.toLowerCase()!="span"){return}k.value+=(!h.innerText||h.innerText=="&nbsp;"||h.innerText.trim()=="")?"":h.innerText;$tx.stop(i);k.focus();if($tx.msie){try{var j=f.selection.createRange();j.move("character",k.value.length);j.select()}catch(l){}}}});Editor.getTool().specialchar.oninitialized()})();